<!DOCTYPE html>
<html>
	<head>
		<title>Game</title>
		<style>
			body{
				background-color: #17212d;
			}
			button{
				background-color: #FFFFFF;
			}
			label{
				color: #d8d8d8;
			}
		</style>
	</head>
	<body>
		<div>
			<label>Username</label>
			<br><input type='text' name='username'>
			<label><br>Age</label>
			<br><input type='text'name='age'>
			<label><br>Email</label>
			<br><input type='text' name='email'>
			<label><br>Password</label>
			<br><input type='password' name='password'>
			<label><br>Verify Password</label>
			<br><input type='password'name='verifyPassword'>
			<br><button>Register Your Account</button>
		</div>
		<script>
			function verifyPassword(){
				var $passwords = document.querySelectorAll('input[type="password"]');
				var isSamePassword = $passwords[0].value === $passwords[1].value;
				if(!isSamePassword) {
					alert("Please enter the same password!")
				}
				return isSamePassword;
			}

			function grabData() {
			// Getting all the input tags
			var $inputs = document.querySelectorAll('input');

			// Defining a variable to store all the data
			var data = {};

			// Looping through all the input tags
			for(var i = 0; i < $inputs.length; i++) {

				// Getting the ith input tag
				var $input = $inputs[i];

				// Getting the name of the data that the input tag holds
				var name = $input.name;

				// Getting the value that the user entered into the input tag
				var value = $input.value;

				// Storing the value and its name
				data[name] = value
			}
			// Outputting the data
			return data
		}

		function sendData(data){
			if(!verifyPassword()){
				return;
			}
			var req = new XMLHttpRequest();
			req.open('POST', '/login', true);
			req.setRequestHeader('content-type', 'application/json');
			// Alert the user to any errors from the server
			function readyStateChange() {
				if(req.readyState !== 4) return;
				if(req.status !== 200) return;
				data = JSON.parse(req.responseText);
				if(data.error) {
					alert(data.error);
				}
			}
			req.onreadystatechange = readyStateChange;
			req.send(JSON.stringify(data));
		}

		function submit(){
			var formData = grabData();
			sendData(formData);
		}

		var $button = document.querySelector('button')
		$button.addEventListener('click', submit)
		</script>
	</body>
</html>
